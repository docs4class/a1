<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 DPLYR | Data Analytics One - Class Materials and Lessons</title>
  <meta name="description" content="This is a book that contains all of the materials and lessons for Dr. Turner’s data analytics one course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 DPLYR | Data Analytics One - Class Materials and Lessons" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a book that contains all of the materials and lessons for Dr. Turner’s data analytics one course." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 DPLYR | Data Analytics One - Class Materials and Lessons" />
  
  <meta name="twitter:description" content="This is a book that contains all of the materials and lessons for Dr. Turner’s data analytics one course." />
  

<meta name="author" content="Authored and Edited by: Dr. Turner and Seth Cooper" />


<meta name="date" content="2021-12-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="playing-with-data-using-mtcars.html"/>
<link rel="next" href="more-dplyr.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analytics One Bookdown</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-r"><i class="fa fa-check"></i><b>1.1</b> About R</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-good-is-data-science"><i class="fa fa-check"></i><b>1.2</b> What Good is Data Science?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> R basics and workflows</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#basics-of-working-with-r-at-the-command-line-and-rstudio-goodies"><i class="fa fa-check"></i><b>2.1</b> Basics of working with R at the command line and RStudio goodies</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#workspace-and-working-directory"><i class="fa fa-check"></i><b>2.2</b> Workspace and working directory</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-basics.html"><a href="r-basics.html#workspace-.rdata"><i class="fa fa-check"></i><b>2.2.1</b> Workspace, <code>.RData</code></a></li>
<li class="chapter" data-level="2.2.2" data-path="r-basics.html"><a href="r-basics.html#working-directory"><i class="fa fa-check"></i><b>2.2.2</b> Working directory</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#exercises"><i class="fa fa-check"></i><b>2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html"><i class="fa fa-check"></i><b>3</b> R vs. Excel</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#both-are-useful"><i class="fa fa-check"></i><b>3.1</b> Both are useful</a></li>
<li class="chapter" data-level="3.2" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#differences-between-r-and-excel"><i class="fa fa-check"></i><b>3.2</b> Differences Between R and Excel</a></li>
<li class="chapter" data-level="3.3" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#ease-of-use-learning-the-software"><i class="fa fa-check"></i><b>3.3</b> Ease of Use &amp; Learning the Software</a></li>
<li class="chapter" data-level="3.4" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#replicating-analysis"><i class="fa fa-check"></i><b>3.4</b> Replicating Analysis</a></li>
<li class="chapter" data-level="3.5" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#visualization"><i class="fa fa-check"></i><b>3.5</b> Visualization</a></li>
<li class="chapter" data-level="3.6" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#packages"><i class="fa fa-check"></i><b>3.6</b> Packages</a></li>
<li class="chapter" data-level="3.7" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#careers"><i class="fa fa-check"></i><b>3.7</b> Careers</a></li>
<li class="chapter" data-level="3.8" data-path="r-vs.-excel.html"><a href="r-vs.-excel.html#summary-using-r-and-excel"><i class="fa fa-check"></i><b>3.8</b> Summary – Using R and Excel</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html"><i class="fa fa-check"></i><b>4</b> Objects and Arithmetic</a>
<ul>
<li class="chapter" data-level="4.1" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#basic-functions"><i class="fa fa-check"></i><b>4.2</b> Basic Functions</a></li>
<li class="chapter" data-level="4.3" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#statistics-and-summaries"><i class="fa fa-check"></i><b>4.3</b> Statistics and Summaries</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#statistical-analysis"><i class="fa fa-check"></i><b>4.3.1</b> Statistical Analysis</a></li>
<li class="chapter" data-level="4.3.2" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#anscombes-quartet"><i class="fa fa-check"></i><b>4.3.2</b> Anscombe’s Quartet</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="objects-and-arithmetic.html"><a href="objects-and-arithmetic.html#exercises-1"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="summaries-and-subscripting.html"><a href="summaries-and-subscripting.html"><i class="fa fa-check"></i><b>5</b> Summaries and Subscripting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="summaries-and-subscripting.html"><a href="summaries-and-subscripting.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="summaries-and-subscripting.html"><a href="summaries-and-subscripting.html#exercises-summaries-and-subscripting"><i class="fa fa-check"></i><b>5.2</b> Exercises (Summaries and Subscripting)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="matrices.html"><a href="matrices.html"><i class="fa fa-check"></i><b>6</b> Matrices</a>
<ul>
<li class="chapter" data-level="6.1" data-path="matrices.html"><a href="matrices.html#cbind-and-rbind"><i class="fa fa-check"></i><b>6.1</b> CBind and RBind</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="matrices.html"><a href="matrices.html#review-questions"><i class="fa fa-check"></i><b>6.1.1</b> Review Questions</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="matrices.html"><a href="matrices.html#matrix-function"><i class="fa fa-check"></i><b>6.2</b> Matrix Function</a></li>
<li class="chapter" data-level="6.3" data-path="matrices.html"><a href="matrices.html#exercises-2"><i class="fa fa-check"></i><b>6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="playing-with-data-using-mtcars.html"><a href="playing-with-data-using-mtcars.html"><i class="fa fa-check"></i><b>7</b> Playing With Data (Using mtcars)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="playing-with-data-using-mtcars.html"><a href="playing-with-data-using-mtcars.html#practicing-with-mtcars-data-set"><i class="fa fa-check"></i><b>7.1</b> Practicing with <code>mtcars</code> data set</a></li>
<li class="chapter" data-level="7.2" data-path="playing-with-data-using-mtcars.html"><a href="playing-with-data-using-mtcars.html#excerises-for-you"><i class="fa fa-check"></i><b>7.2</b> Excerises for you:</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>8</b> DPLYR</a>
<ul>
<li class="chapter" data-level="8.1" data-path="dplyr.html"><a href="dplyr.html#introduction-3"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="dplyr.html"><a href="dplyr.html#single-table-verbs"><i class="fa fa-check"></i><b>8.2</b> Single table verbs</a></li>
<li class="chapter" data-level="8.3" data-path="dplyr.html"><a href="dplyr.html#the-pipe"><i class="fa fa-check"></i><b>8.3</b> The pipe</a></li>
<li class="chapter" data-level="8.4" data-path="dplyr.html"><a href="dplyr.html#loading-dplyr-and-the-nycflights13-dataset"><i class="fa fa-check"></i><b>8.4</b> Loading dplyr and the nycflights13 dataset</a></li>
<li class="chapter" data-level="8.5" data-path="dplyr.html"><a href="dplyr.html#choosing-columns-select-rename"><i class="fa fa-check"></i><b>8.5</b> Choosing columns: select, rename</a></li>
<li class="chapter" data-level="8.6" data-path="dplyr.html"><a href="dplyr.html#choosing-rows-filter-between-slice-sample_n-top_n-distinct"><i class="fa fa-check"></i><b>8.6</b> Choosing rows: filter, between, slice, sample_n, top_n, distinct</a></li>
<li class="chapter" data-level="8.7" data-path="dplyr.html"><a href="dplyr.html#adding-new-variables-mutate-transmute-add_rownames"><i class="fa fa-check"></i><b>8.7</b> Adding new variables: mutate, transmute, add_rownames</a></li>
<li class="chapter" data-level="8.8" data-path="dplyr.html"><a href="dplyr.html#grouping-and-counting-summarise-tally-count-group_size-n_groups-ungroup"><i class="fa fa-check"></i><b>8.8</b> Grouping and counting: summarise, tally, count, group_size, n_groups, ungroup</a></li>
<li class="chapter" data-level="8.9" data-path="dplyr.html"><a href="dplyr.html#creating-data-frames-data_frame"><i class="fa fa-check"></i><b>8.9</b> Creating data frames: data_frame</a></li>
<li class="chapter" data-level="8.10" data-path="dplyr.html"><a href="dplyr.html#joining-merging-tables-left_join-right_join-inner_join-full_join-semi_join-anti_join"><i class="fa fa-check"></i><b>8.10</b> Joining (merging) tables: left_join, right_join, inner_join, full_join, semi_join, anti_join</a></li>
<li class="chapter" data-level="8.11" data-path="dplyr.html"><a href="dplyr.html#viewing-more-output-print-view"><i class="fa fa-check"></i><b>8.11</b> Viewing more output: print, View</a></li>
<li class="chapter" data-level="8.12" data-path="dplyr.html"><a href="dplyr.html#resources"><i class="fa fa-check"></i><b>8.12</b> Resources</a></li>
<li class="chapter" data-level="8.13" data-path="dplyr.html"><a href="dplyr.html#data-school"><i class="fa fa-check"></i><b>8.13</b> Data School</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="more-dplyr.html"><a href="more-dplyr.html"><i class="fa fa-check"></i><b>9</b> More DPLYR</a>
<ul>
<li class="chapter" data-level="9.1" data-path="more-dplyr.html"><a href="more-dplyr.html#introduction-4"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="more-dplyr.html"><a href="more-dplyr.html#single-table-verbs-1"><i class="fa fa-check"></i><b>9.2</b> Single table verbs</a></li>
<li class="chapter" data-level="9.3" data-path="more-dplyr.html"><a href="more-dplyr.html#more-with-the-pipe"><i class="fa fa-check"></i><b>9.3</b> More with the pipe</a></li>
<li class="chapter" data-level="9.4" data-path="more-dplyr.html"><a href="more-dplyr.html#loading-dplyr-and-the-starwars-dataset"><i class="fa fa-check"></i><b>9.4</b> Loading <code>dplyr</code> and the <code>starwars</code> dataset</a></li>
<li class="chapter" data-level="9.5" data-path="more-dplyr.html"><a href="more-dplyr.html#starwars-excercises"><i class="fa fa-check"></i><b>9.5</b> <code>starwars</code> Excercises</a></li>
<li class="chapter" data-level="9.6" data-path="more-dplyr.html"><a href="more-dplyr.html#nycflights13-excercises"><i class="fa fa-check"></i><b>9.6</b> <code>nycflights13</code> Excercises</a></li>
<li class="chapter" data-level="9.7" data-path="more-dplyr.html"><a href="more-dplyr.html#storms-excercises"><i class="fa fa-check"></i><b>9.7</b> <code>storms</code> Excercises</a></li>
<li class="chapter" data-level="9.8" data-path="more-dplyr.html"><a href="more-dplyr.html#starwars-excercises-1"><i class="fa fa-check"></i><b>9.8</b> <code>starwars</code> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gdh-ice-cream.html"><a href="gdh-ice-cream.html"><i class="fa fa-check"></i><b>10</b> GDH Ice Cream</a>
<ul>
<li class="chapter" data-level="10.1" data-path="gdh-ice-cream.html"><a href="gdh-ice-cream.html#problem-introduction"><i class="fa fa-check"></i><b>10.1</b> Problem Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="gdh-ice-cream.html"><a href="gdh-ice-cream.html#assignment"><i class="fa fa-check"></i><b>10.2</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>11</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="11.1" data-path="linear-regression.html"><a href="linear-regression.html#what-is-machine-learning"><i class="fa fa-check"></i><b>11.1</b> What is Machine Learning?</a></li>
<li class="chapter" data-level="11.2" data-path="linear-regression.html"><a href="linear-regression.html#model-structure"><i class="fa fa-check"></i><b>11.2</b> Model Structure</a></li>
<li class="chapter" data-level="11.3" data-path="linear-regression.html"><a href="linear-regression.html#interpretation-of-the-model"><i class="fa fa-check"></i><b>11.3</b> Interpretation of the Model</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="linear-regression.html"><a href="linear-regression.html#p-values"><i class="fa fa-check"></i><b>11.3.1</b> P-Values</a></li>
<li class="chapter" data-level="11.3.2" data-path="linear-regression.html"><a href="linear-regression.html#multiple-r-squared"><i class="fa fa-check"></i><b>11.3.2</b> Multiple R-Squared</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="linear-regression.html"><a href="linear-regression.html#applying-the-model-to-make-predictions"><i class="fa fa-check"></i><b>11.4</b> Applying the Model to Make Predictions</a></li>
<li class="chapter" data-level="11.5" data-path="linear-regression.html"><a href="linear-regression.html#review-questions-1"><i class="fa fa-check"></i><b>11.5</b> Review Questions</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="logistic-regression.html"><a href="logistic-regression.html"><i class="fa fa-check"></i><b>12</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="12.1" data-path="logistic-regression.html"><a href="logistic-regression.html#introduction-5"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="logistic-regression.html"><a href="logistic-regression.html#training-data-and-test-data"><i class="fa fa-check"></i><b>12.2</b> Training Data and Test Data</a></li>
<li class="chapter" data-level="12.3" data-path="logistic-regression.html"><a href="logistic-regression.html#model-structure-1"><i class="fa fa-check"></i><b>12.3</b> Model Structure</a></li>
<li class="chapter" data-level="12.4" data-path="logistic-regression.html"><a href="logistic-regression.html#model-interpretation"><i class="fa fa-check"></i><b>12.4</b> Model Interpretation</a></li>
<li class="chapter" data-level="12.5" data-path="logistic-regression.html"><a href="logistic-regression.html#review-questions-2"><i class="fa fa-check"></i><b>12.5</b> Review Questions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dealing-with-errors.html"><a href="dealing-with-errors.html"><i class="fa fa-check"></i><b>13</b> Dealing with Errors</a>
<ul>
<li class="chapter" data-level="13.1" data-path="dealing-with-errors.html"><a href="dealing-with-errors.html#introduction-6"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="dealing-with-errors.html"><a href="dealing-with-errors.html#troubleshooting-typical-errors"><i class="fa fa-check"></i><b>13.2</b> Troubleshooting Typical Errors</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="data-analytics-i-quizzes.html"><a href="data-analytics-i-quizzes.html"><i class="fa fa-check"></i><b>14</b> Data Analytics I Quizzes</a>
<ul>
<li class="chapter" data-level="14.1" data-path="data-analytics-i-quizzes.html"><a href="data-analytics-i-quizzes.html#quiz-one-linear-regression"><i class="fa fa-check"></i><b>14.1</b> Quiz One (Linear Regression)</a></li>
<li class="chapter" data-level="14.2" data-path="data-analytics-i-quizzes.html"><a href="data-analytics-i-quizzes.html#quiz-two"><i class="fa fa-check"></i><b>14.2</b> Quiz Two</a></li>
<li class="chapter" data-level="14.3" data-path="data-analytics-i-quizzes.html"><a href="data-analytics-i-quizzes.html#quiz-three"><i class="fa fa-check"></i><b>14.3</b> Quiz Three</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="practice-final-exam.html"><a href="practice-final-exam.html"><i class="fa fa-check"></i><b>15</b> Practice Final Exam</a>
<ul>
<li class="chapter" data-level="15.1" data-path="practice-final-exam.html"><a href="practice-final-exam.html#meter-freestyle-olympic-winning-time-seconds"><i class="fa fa-check"></i><b>15.1</b> 100-Meter Freestyle Olympic Winning Time (seconds)</a></li>
<li class="chapter" data-level="15.2" data-path="practice-final-exam.html"><a href="practice-final-exam.html#starwars-fun"><i class="fa fa-check"></i><b>15.2</b> Starwars fun</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analytics One - Class Materials and Lessons</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> DPLYR</h1>
<div id="introduction-3" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Introduction</h2>
<p>For more help <strong>PLEASE</strong> check out <a href="https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html">Introduction to dplyr</a> introducing the key functionality of the dplyr package.</p>
<blockquote>
<p>Your life is about to change. For the better, even.</p>
</blockquote>
</div>
<div id="single-table-verbs" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Single table verbs</h2>
<p><code>dplyr</code> aims to provide a function for each basic verb of data manipulation. These verbs can be organised into three categories based on the component of the dataset that they work with:</p>
<p>Rows:</p>
<ul>
<li><code>filter()</code> chooses rows based on column values.</li>
<li><code>slice()</code> chooses rows based on location.</li>
<li><code>arrange()</code> changes the order of the rows.</li>
</ul>
<p>Columns:</p>
<ul>
<li><code>select()</code> changes whether or not a column is included.</li>
<li><code>rename()</code> changes the name of columns.
<code>mutate()</code> changes the values of columns and creates new columns.</li>
<li><code>relocate()</code> changes the order of the columns.
Groups of rows:</li>
<li><code>summarise()</code> collapses a group into a single row. It’s not that useful until we learn the <code>group_by()</code> verb below.</li>
</ul>
</div>
<div id="the-pipe" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> The pipe</h2>
<p>All of the <code>dplyr</code> functions take a data frame (or tibble) as the first argument. Rather than forcing the user to either save intermediate objects or nest functions, dplyr provides the <code>%&gt;%</code> operator from magrittr. x %&gt;% f(y) turns into f(x, y) so the result from one step is then “piped” into the next step. You can use the pipe to rewrite multiple operations that you can read left-to-right, top-to-bottom (reading the pipe operator as “then”).</p>
</div>
<div id="loading-dplyr-and-the-nycflights13-dataset" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Loading dplyr and the nycflights13 dataset</h2>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="dplyr.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb147-2"><a href="dplyr.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>(<span class="fu">library</span>(dplyr))</span>
<span id="cb147-3"><a href="dplyr.html#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb147-4"><a href="dplyr.html#cb147-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-5"><a href="dplyr.html#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print the flights dataset from nycflights13</span></span>
<span id="cb147-6"><a href="dplyr.html#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flights)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      517            515         2      830            819
## 2  2013     1     1      533            529         4      850            830
## 3  2013     1     1      542            540         2      923            850
## 4  2013     1     1      544            545        -1     1004           1022
## 5  2013     1     1      554            600        -6      812            837
## 6  2013     1     1      554            558        -4      740            728
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="choosing-columns-select-rename" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Choosing columns: select, rename</h2>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="dplyr.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># besides just using select() to pick columns...</span></span>
<span id="cb149-2"><a href="dplyr.html#cb149-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(carrier, flight)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 2
##    carrier flight
##    &lt;chr&gt;    &lt;int&gt;
##  1 UA        1545
##  2 UA        1714
##  3 AA        1141
##  4 B6         725
##  5 DL         461
##  6 UA        1696
##  7 B6         507
##  8 EV        5708
##  9 B6          79
## 10 AA         301
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="dplyr.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ...you can use the minus sign to hide columns</span></span>
<span id="cb151-2"><a href="dplyr.html#cb151-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>month, <span class="sc">-</span>day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 17
##     year dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay
##    &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1  2013      517            515         2      830            819        11
##  2  2013      533            529         4      850            830        20
##  3  2013      542            540         2      923            850        33
##  4  2013      544            545        -1     1004           1022       -18
##  5  2013      554            600        -6      812            837       -25
##  6  2013      554            558        -4      740            728        12
##  7  2013      555            600        -5      913            854        19
##  8  2013      557            600        -3      709            723       -14
##  9  2013      557            600        -3      838            846        -8
## 10  2013      558            600        -2      753            745         8
## # ... with 336,766 more rows, and 10 more variables: carrier &lt;chr&gt;,
## #   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,
## #   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="dplyr.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># hide a range of columns</span></span>
<span id="cb153-2"><a href="dplyr.html#cb153-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(dep_time<span class="sc">:</span>arr_delay))</span>
<span id="cb153-3"><a href="dplyr.html#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="dplyr.html#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co"># hide any column with a matching name</span></span>
<span id="cb153-5"><a href="dplyr.html#cb153-5" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;time&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="dplyr.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pick columns using a character vector of column names</span></span>
<span id="cb154-2"><a href="dplyr.html#cb154-2" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;carrier&quot;</span>, <span class="st">&quot;flight&quot;</span>, <span class="st">&quot;tailnum&quot;</span>)</span>
<span id="cb154-3"><a href="dplyr.html#cb154-3" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">one_of</span>(cols))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##    carrier flight tailnum
##    &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1 UA        1545 N14228 
##  2 UA        1714 N24211 
##  3 AA        1141 N619AA 
##  4 B6         725 N804JB 
##  5 DL         461 N668DN 
##  6 UA        1696 N39463 
##  7 B6         507 N516JB 
##  8 EV        5708 N829AS 
##  9 B6          79 N593JB 
## 10 AA         301 N3ALAA 
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="dplyr.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select() can be used to rename columns, though all columns not mentioned are dropped</span></span>
<span id="cb156-2"><a href="dplyr.html#cb156-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">tail =</span> tailnum)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 1
##    tail  
##    &lt;chr&gt; 
##  1 N14228
##  2 N24211
##  3 N619AA
##  4 N804JB
##  5 N668DN
##  6 N39463
##  7 N516JB
##  8 N829AS
##  9 N593JB
## 10 N3ALAA
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="dplyr.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rename() does the same thing, except all columns not mentioned are kept</span></span>
<span id="cb158-2"><a href="dplyr.html#cb158-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tail =</span> tailnum)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ... with 336,766 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tail &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="choosing-rows-filter-between-slice-sample_n-top_n-distinct" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Choosing rows: filter, between, slice, sample_n, top_n, distinct</h2>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="dplyr.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter() supports the use of multiple conditions</span></span>
<span id="cb160-2"><a href="dplyr.html#cb160-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(dep_time <span class="sc">&gt;=</span> <span class="dv">600</span>, dep_time <span class="sc">&lt;=</span> <span class="dv">605</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2,460 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      600            600         0      851            858
##  2  2013     1     1      600            600         0      837            825
##  3  2013     1     1      601            600         1      844            850
##  4  2013     1     1      602            610        -8      812            820
##  5  2013     1     1      602            605        -3      821            805
##  6  2013     1     2      600            600         0      814            749
##  7  2013     1     2      600            605        -5      751            818
##  8  2013     1     2      600            600         0      819            815
##  9  2013     1     2      600            600         0      846            846
## 10  2013     1     2      600            600         0      737            725
## # ... with 2,450 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="dplyr.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># between() is a concise alternative for determing if numeric values fall in a range</span></span>
<span id="cb162-2"><a href="dplyr.html#cb162-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">between</span>(dep_time, <span class="dv">600</span>, <span class="dv">605</span>))</span>
<span id="cb162-3"><a href="dplyr.html#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="dplyr.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="co"># side note: is.na() can also be useful when filtering</span></span>
<span id="cb162-5"><a href="dplyr.html#cb162-5" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_time))</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="dplyr.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># slice() filters rows by position</span></span>
<span id="cb163-2"><a href="dplyr.html#cb163-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1000</span><span class="sc">:</span><span class="dv">1005</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     2      809            810        -1      950            948
## 2  2013     1     2      810            800        10     1008           1014
## 3  2013     1     2      811            815        -4     1100           1056
## 4  2013     1     2      811            815        -4     1126           1131
## 5  2013     1     2      811            820        -9      944            955
## 6  2013     1     2      815            815         0     1109           1128
## # ... with 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="dplyr.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep the first three rows within each group</span></span>
<span id="cb165-2"><a href="dplyr.html#cb165-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,095 x 19
## # Groups:   month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     2       42           2359        43      518            442
##  5  2013     1     2      126           2250       156      233           2359
##  6  2013     1     2      458            500        -2      703            650
##  7  2013     1     3       32           2359        33      504            442
##  8  2013     1     3       50           2145       185      203           2311
##  9  2013     1     3      235           2359       156      700            437
## 10  2013     1     4       25           2359        26      505            442
## # ... with 1,085 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="dplyr.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sample three rows from each group</span></span>
<span id="cb167-2"><a href="dplyr.html#cb167-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,095 x 19
## # Groups:   month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1     1350           1329        21     1504           1453
##  2  2013     1     1     2056           2100        -4     2240           2235
##  3  2013     1     1     1252           1245         7     1624           1550
##  4  2013     1     2      912            905         7     1114           1120
##  5  2013     1     2      815            815         0     1109           1128
##  6  2013     1     2     1753           1700        53     2052           2014
##  7  2013     1     3     1829           1815        14     1941           1930
##  8  2013     1     3     1504           1444        20     1846           1802
##  9  2013     1     3     1728           1729        -1     1900           1902
## 10  2013     1     4     1508           1515        -7     1656           1700
## # ... with 1,085 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="dplyr.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep three rows from each group with the top dep_delay</span></span>
<span id="cb169-2"><a href="dplyr.html#cb169-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">3</span>, dep_delay)</span></code></pre></div>
<pre><code>## # A tibble: 1,108 x 19
## # Groups:   month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      848           1835       853     1001           1950
##  2  2013     1     1     1815           1325       290     2120           1542
##  3  2013     1     1     2343           1724       379      314           1938
##  4  2013     1     2     1412            838       334     1710           1147
##  5  2013     1     2     1607           1030       337     2003           1355
##  6  2013     1     2     2131           1512       379     2340           1741
##  7  2013     1     3     2008           1540       268     2339           1909
##  8  2013     1     3     2012           1600       252     2314           1857
##  9  2013     1     3     2056           1605       291     2239           1754
## 10  2013     1     4     2058           1730       208        2           2110
## # ... with 1,098 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="dplyr.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># also sort by dep_delay within each group</span></span>
<span id="cb171-2"><a href="dplyr.html#cb171-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">3</span>, dep_delay) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span></code></pre></div>
<pre><code>## # A tibble: 1,108 x 19
## # Groups:   month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242           1530
##  2  2013     6    15     1432           1935      1137     1607           2120
##  3  2013     1    10     1121           1635      1126     1239           1810
##  4  2013     9    20     1139           1845      1014     1457           2210
##  5  2013     7    22      845           1600      1005     1044           1815
##  6  2013     4    10     1100           1900       960     1342           2211
##  7  2013     3    17     2321            810       911      135           1020
##  8  2013     6    27      959           1900       899     1236           2226
##  9  2013     7    22     2257            759       898      121           1026
## 10  2013    12     5      756           1700       896     1058           2020
## # ... with 1,098 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="dplyr.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unique rows can be identified using unique() from base R</span></span>
<span id="cb173-2"><a href="dplyr.html#cb173-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(origin, dest) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>## # A tibble: 224 x 2
##    origin dest 
##    &lt;chr&gt;  &lt;chr&gt;
##  1 EWR    IAH  
##  2 LGA    IAH  
##  3 JFK    MIA  
##  4 JFK    BQN  
##  5 LGA    ATL  
##  6 EWR    ORD  
##  7 EWR    FLL  
##  8 LGA    IAD  
##  9 JFK    MCO  
## 10 LGA    ORD  
## # ... with 214 more rows</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="dplyr.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dplyr provides an alternative that is more &quot;efficient&quot;</span></span>
<span id="cb175-2"><a href="dplyr.html#cb175-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(origin, dest) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span>
<span id="cb175-3"><a href="dplyr.html#cb175-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-4"><a href="dplyr.html#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="co"># side note: when chaining, you don&#39;t have to include the parentheses if there are no arguments</span></span>
<span id="cb175-5"><a href="dplyr.html#cb175-5" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(origin, dest) <span class="sc">%&gt;%</span> distinct</span></code></pre></div>
</div>
<div id="adding-new-variables-mutate-transmute-add_rownames" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> Adding new variables: mutate, transmute, add_rownames</h2>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="dplyr.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate() creates a new variable (and keeps all existing variables)</span></span>
<span id="cb176-2"><a href="dplyr.html#cb176-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">speed =</span> distance<span class="sc">/</span>air_time<span class="sc">*</span><span class="dv">60</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ... with 336,766 more rows, and 12 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   speed &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="dplyr.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transmute() only keeps the new variables</span></span>
<span id="cb178-2"><a href="dplyr.html#cb178-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">speed =</span> distance<span class="sc">/</span>air_time<span class="sc">*</span><span class="dv">60</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 1
##    speed
##    &lt;dbl&gt;
##  1  370.
##  2  374.
##  3  408.
##  4  517.
##  5  394.
##  6  288.
##  7  404.
##  8  259.
##  9  405.
## 10  319.
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="dplyr.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example data frame with row names</span></span>
<span id="cb180-2"><a href="dplyr.html#cb180-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="dplyr.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add_rownames() turns row names into an explicit variable</span></span>
<span id="cb182-2"><a href="dplyr.html#cb182-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">add_rownames</span>(<span class="st">&quot;model&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## Warning: `add_rownames()` was deprecated in dplyr 1.0.0.
## Please use `tibble::rownames_to_column()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<pre><code>## # A tibble: 6 x 12
##   model          mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4
## 2 Mazda RX4 W~  21       6   160   110  3.9   2.88  17.0     0     1     4     4
## 3 Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1
## 4 Hornet 4 Dr~  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1
## 5 Hornet Spor~  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2
## 6 Valiant       18.1     6   225   105  2.76  3.46  20.2     1     0     3     1</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="dplyr.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># side note: dplyr no longer prints row names (ever) for local data frames</span></span>
<span id="cb185-2"><a href="dplyr.html#cb185-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">tbl_df</span>()</span></code></pre></div>
<pre><code>## Warning: `tbl_df()` was deprecated in dplyr 1.0.0.
## Please use `tibble::as_tibble()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<pre><code>## # A tibble: 32 x 11
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # ... with 22 more rows</code></pre>
</div>
<div id="grouping-and-counting-summarise-tally-count-group_size-n_groups-ungroup" class="section level2" number="8.8">
<h2><span class="header-section-number">8.8</span> Grouping and counting: summarise, tally, count, group_size, n_groups, ungroup</h2>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="dplyr.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarise() can be used to count the number of rows in each group</span></span>
<span id="cb188-2"><a href="dplyr.html#cb188-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">cnt =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##    month   cnt
##    &lt;int&gt; &lt;int&gt;
##  1     1 27004
##  2     2 24951
##  3     3 28834
##  4     4 28330
##  5     5 28796
##  6     6 28243
##  7     7 29425
##  8     8 29327
##  9     9 27574
## 10    10 28889
## 11    11 27268
## 12    12 28135</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="dplyr.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tally() and count() can do this more concisely</span></span>
<span id="cb190-2"><a href="dplyr.html#cb190-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">tally</span>()</span>
<span id="cb190-3"><a href="dplyr.html#cb190-3" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(month)</span></code></pre></div>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="dplyr.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can sort by the count</span></span>
<span id="cb191-2"><a href="dplyr.html#cb191-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">cnt =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(cnt))</span></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##    month   cnt
##    &lt;int&gt; &lt;int&gt;
##  1     7 29425
##  2     8 29327
##  3    10 28889
##  4     3 28834
##  5     5 28796
##  6     4 28330
##  7     6 28243
##  8    12 28135
##  9     9 27574
## 10    11 27268
## 11     1 27004
## 12     2 24951</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="dplyr.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tally() and count() have a sort parameter for this purpose</span></span>
<span id="cb193-2"><a href="dplyr.html#cb193-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">tally</span>(<span class="at">sort=</span><span class="cn">TRUE</span>)</span>
<span id="cb193-3"><a href="dplyr.html#cb193-3" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(month, <span class="at">sort=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="dplyr.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can sum over a specific variable instead of simply counting rows</span></span>
<span id="cb194-2"><a href="dplyr.html#cb194-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">dist =</span> <span class="fu">sum</span>(distance))</span></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##    month     dist
##    &lt;int&gt;    &lt;dbl&gt;
##  1     1 27188805
##  2     2 24975509
##  3     3 29179636
##  4     4 29427294
##  5     5 29974128
##  6     6 29856388
##  7     7 31149199
##  8     8 31149334
##  9     9 28711426
## 10    10 30012086
## 11    11 28639718
## 12    12 29954084</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="dplyr.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tally() and count() have a wt parameter for this purpose</span></span>
<span id="cb196-2"><a href="dplyr.html#cb196-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">tally</span>(<span class="at">wt =</span> distance)</span>
<span id="cb196-3"><a href="dplyr.html#cb196-3" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">count</span>(month, <span class="at">wt =</span> distance)</span></code></pre></div>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="dplyr.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group_size() returns the counts as a vector</span></span>
<span id="cb197-2"><a href="dplyr.html#cb197-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">group_size</span>()</span></code></pre></div>
<pre><code>##  [1] 27004 24951 28834 28330 28796 28243 29425 29327 27574 28889 27268 28135</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="dplyr.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># n_groups() simply reports the number of groups</span></span>
<span id="cb199-2"><a href="dplyr.html#cb199-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="fu">n_groups</span>()</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="dplyr.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># group by two variables, summarise, arrange (output is possibly confusing)</span></span>
<span id="cb201-2"><a href="dplyr.html#cb201-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">cnt =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(cnt)) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">40</span>)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;month&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 365 x 3
## # Groups:   month [12]
##    month   day   cnt
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    11    27  1014
##  2     7    11  1006
##  3     7     8  1004
##  4     7    10  1004
##  5    12     2  1004
##  6     7    18  1003
##  7     7    25  1003
##  8     7    12  1002
##  9     7     9  1001
## 10     7    17  1001
## 11     7    31  1001
## 12     8     7  1001
## 13     8     8  1001
## 14     8    12  1001
## 15     7    22  1000
## 16     7    24  1000
## 17     8     1  1000
## 18     8     5  1000
## 19     8    15  1000
## 20    11    21  1000
## 21     7    15   999
## 22     7    19   999
## 23     7    26   999
## 24     7    29   999
## 25     8     2   999
## 26     8     9   999
## 27    11    22   999
## 28     8    16   998
## 29     7    23   997
## 30     7    30   997
## 31     8    14   997
## 32     7    16   996
## 33     8     6   996
## 34     8    19   996
## 35     9    13   996
## 36     9    26   996
## 37     9    27   996
## 38     4    15   995
## 39     6    20   995
## 40     6    26   995
## # ... with 325 more rows</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="dplyr.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ungroup() before arranging to arrange across all groups</span></span>
<span id="cb204-2"><a href="dplyr.html#cb204-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(month, day) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">cnt =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(cnt))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;month&#39;. You can override using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 365 x 3
##    month   day   cnt
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    11    27  1014
##  2     7    11  1006
##  3     7     8  1004
##  4     7    10  1004
##  5    12     2  1004
##  6     7    18  1003
##  7     7    25  1003
##  8     7    12  1002
##  9     7     9  1001
## 10     7    17  1001
## # ... with 355 more rows</code></pre>
</div>
<div id="creating-data-frames-data_frame" class="section level2" number="8.9">
<h2><span class="header-section-number">8.9</span> Creating data frames: data_frame</h2>
<p><code>data_frame()</code> is a better way than <code>data.frame()</code> for creating data frames. Benefits of <code>data_frame()</code>:</p>
<ul>
<li>You can use previously defined columns to compute new columns.</li>
<li>It never coerces column types.</li>
<li>It never munges column names.</li>
<li>It never adds row names.</li>
<li>It only recycles length 1 input.</li>
<li>It returns a local data frame (a tbl_df).</li>
</ul>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="dplyr.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data_frame() example</span></span>
<span id="cb207-2"><a href="dplyr.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data_frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">b =</span> a<span class="sc">*</span><span class="dv">2</span>, <span class="at">c =</span> <span class="st">&#39;string&#39;</span>, <span class="st">&#39;d+e&#39;</span> <span class="ot">=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Warning: `data_frame()` was deprecated in tibble 1.1.0.
## Please use `tibble()` instead.
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
<pre><code>## Rows: 6
## Columns: 4
## $ a     &lt;int&gt; 1, 2, 3, 4, 5, 6
## $ b     &lt;dbl&gt; 2, 4, 6, 8, 10, 12
## $ c     &lt;chr&gt; &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;
## $ `d+e` &lt;dbl&gt; 1, 1, 1, 1, 1, 1</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="dplyr.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame() example</span></span>
<span id="cb210-2"><a href="dplyr.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">c =</span> <span class="st">&#39;string&#39;</span>, <span class="st">&#39;d+e&#39;</span> <span class="ot">=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 6
## Columns: 3
## $ a   &lt;int&gt; 1, 2, 3, 4, 5, 6
## $ c   &lt;chr&gt; &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;, &quot;string&quot;
## $ d.e &lt;dbl&gt; 1, 1, 1, 1, 1, 1</code></pre>
</div>
<div id="joining-merging-tables-left_join-right_join-inner_join-full_join-semi_join-anti_join" class="section level2" number="8.10">
<h2><span class="header-section-number">8.10</span> Joining (merging) tables: left_join, right_join, inner_join, full_join, semi_join, anti_join</h2>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="dplyr.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create two simple data frames</span></span>
<span id="cb212-2"><a href="dplyr.html#cb212-2" aria-hidden="true" tabindex="-1"></a>(a <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(<span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;red&quot;</span>), <span class="at">num =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   color    num
##   &lt;chr&gt;  &lt;int&gt;
## 1 green      1
## 2 yellow     2
## 3 red        3</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="dplyr.html#cb214-1" aria-hidden="true" tabindex="-1"></a>(b <span class="ot">&lt;-</span> <span class="fu">data_frame</span>(<span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;pink&quot;</span>), <span class="at">size =</span> <span class="fu">c</span>(<span class="st">&quot;S&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;L&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   color  size 
##   &lt;chr&gt;  &lt;chr&gt;
## 1 green  S    
## 2 yellow M    
## 3 pink   L</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="dplyr.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># only include observations found in both &quot;a&quot; and &quot;b&quot; (automatically joins on variables that appear in both tables)</span></span>
<span id="cb216-2"><a href="dplyr.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 2 x 3
##   color    num size 
##   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;
## 1 green      1 S    
## 2 yellow     2 M</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="dplyr.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># include observations found in either &quot;a&quot; or &quot;b&quot;</span></span>
<span id="cb219-2"><a href="dplyr.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 4 x 3
##   color    num size 
##   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;
## 1 green      1 S    
## 2 yellow     2 M    
## 3 red        3 &lt;NA&gt; 
## 4 pink      NA L</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="dplyr.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># include all observations found in &quot;a&quot;</span></span>
<span id="cb222-2"><a href="dplyr.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 3 x 3
##   color    num size 
##   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;
## 1 green      1 S    
## 2 yellow     2 M    
## 3 red        3 &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="dplyr.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># include all observations found in &quot;b&quot;</span></span>
<span id="cb225-2"><a href="dplyr.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="fu">right_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 3 x 3
##   color    num size 
##   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;
## 1 green      1 S    
## 2 yellow     2 M    
## 3 pink      NA L</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="dplyr.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># right_join(a, b) is identical to left_join(b, a) except for column ordering</span></span>
<span id="cb228-2"><a href="dplyr.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>(b, a)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 3 x 3
##   color  size    num
##   &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;
## 1 green  S         1
## 2 yellow M         2
## 3 pink   L        NA</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="dplyr.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter &quot;a&quot; to only show observations that match &quot;b&quot;</span></span>
<span id="cb231-2"><a href="dplyr.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">semi_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 2 x 2
##   color    num
##   &lt;chr&gt;  &lt;int&gt;
## 1 green      1
## 2 yellow     2</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="dplyr.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter &quot;a&quot; to only show observations that don&#39;t match &quot;b&quot;</span></span>
<span id="cb234-2"><a href="dplyr.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(a, b)</span></code></pre></div>
<pre><code>## Joining, by = &quot;color&quot;</code></pre>
<pre><code>## # A tibble: 1 x 2
##   color   num
##   &lt;chr&gt; &lt;int&gt;
## 1 red       3</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="dplyr.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sometimes matching variables don&#39;t have identical names</span></span>
<span id="cb237-2"><a href="dplyr.html#cb237-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> b <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">col =</span> color)</span>
<span id="cb237-3"><a href="dplyr.html#cb237-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-4"><a href="dplyr.html#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="co"># specify that the join should occur by matching &quot;color&quot; in &quot;a&quot; with &quot;col&quot; in &quot;b&quot;</span></span>
<span id="cb237-5"><a href="dplyr.html#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(a, b, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;color&quot;</span> <span class="ot">=</span> <span class="st">&quot;col&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   color    num size 
##   &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;
## 1 green      1 S    
## 2 yellow     2 M</code></pre>
</div>
<div id="viewing-more-output-print-view" class="section level2" number="8.11">
<h2><span class="header-section-number">8.11</span> Viewing more output: print, View</h2>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="dplyr.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify that you want to see more rows</span></span>
<span id="cb239-2"><a href="dplyr.html#cb239-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## 11  2013     1     1      558            600        -2      849            851
## 12  2013     1     1      558            600        -2      853            856
## 13  2013     1     1      558            600        -2      924            917
## 14  2013     1     1      558            600        -2      923            937
## 15  2013     1     1      559            600        -1      941            910
## # ... with 336,761 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="dplyr.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify that you want to see ALL rows (don&#39;t run this!)</span></span>
<span id="cb241-2"><a href="dplyr.html#cb241-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="dplyr.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify that you want to see all columns</span></span>
<span id="cb242-2"><a href="dplyr.html#cb242-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
##    arr_delay carrier flight tailnum origin dest  air_time distance  hour minute
##        &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1        11 UA        1545 N14228  EWR    IAH        227     1400     5     15
##  2        20 UA        1714 N24211  LGA    IAH        227     1416     5     29
##  3        33 AA        1141 N619AA  JFK    MIA        160     1089     5     40
##  4       -18 B6         725 N804JB  JFK    BQN        183     1576     5     45
##  5       -25 DL         461 N668DN  LGA    ATL        116      762     6      0
##  6        12 UA        1696 N39463  EWR    ORD        150      719     5     58
##  7        19 B6         507 N516JB  EWR    FLL        158     1065     6      0
##  8       -14 EV        5708 N829AS  LGA    IAD         53      229     6      0
##  9        -8 B6          79 N593JB  JFK    MCO        140      944     6      0
## 10         8 AA         301 N3ALAA  LGA    ORD        138      733     6      0
##    time_hour          
##    &lt;dttm&gt;             
##  1 2013-01-01 05:00:00
##  2 2013-01-01 05:00:00
##  3 2013-01-01 05:00:00
##  4 2013-01-01 05:00:00
##  5 2013-01-01 06:00:00
##  6 2013-01-01 05:00:00
##  7 2013-01-01 06:00:00
##  8 2013-01-01 06:00:00
##  9 2013-01-01 06:00:00
## 10 2013-01-01 06:00:00
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="dplyr.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># show up to 1000 rows and all columns</span></span>
<span id="cb244-2"><a href="dplyr.html#cb244-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">View</span>()</span>
<span id="cb244-3"><a href="dplyr.html#cb244-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-4"><a href="dplyr.html#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set option to see all columns and fewer rows</span></span>
<span id="cb244-5"><a href="dplyr.html#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">dplyr.width =</span> <span class="cn">Inf</span>, <span class="at">dplyr.print_min =</span> <span class="dv">6</span>)</span>
<span id="cb244-6"><a href="dplyr.html#cb244-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-7"><a href="dplyr.html#cb244-7" aria-hidden="true" tabindex="-1"></a><span class="co"># reset options (or just close R)</span></span>
<span id="cb244-8"><a href="dplyr.html#cb244-8" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">dplyr.width =</span> <span class="cn">NULL</span>, <span class="at">dplyr.print_min =</span> <span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="resources" class="section level2" number="8.12">
<h2><span class="header-section-number">8.12</span> Resources</h2>
<ul>
<li>Release announcements for <a href="http://blog.rstudio.org/2014/10/13/dplyr-0-3-2/">version 0.3</a> and <a href="http://blog.rstudio.org/2015/01/09/dplyr-0-4-0/">version 0.4</a></li>
<li><a href="http://cran.r-project.org/web/packages/dplyr/">dplyr reference manual and vignettes</a></li>
<li><a href="http://cran.r-project.org/web/packages/dplyr/vignettes/two-table.html">Two-table vignette</a> covering joins and set operations</li>
<li><a href="http://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">RStudio’s Data Wrangling Cheat Sheet</a> for dplyr and tidyr</li>
<li><a href="https://github.com/hadley/dplyr">dplyr GitHub repo</a> and <a href="https://github.com/hadley/dplyr/releases">list of releases</a></li>
</ul>
</div>
<div id="data-school" class="section level2" number="8.13">
<h2><span class="header-section-number">8.13</span> Data School</h2>
<ul>
<li><a href="http://www.dataschool.io/">Blog</a></li>
<li><a href="http://www.dataschool.io/subscribe/">Email newsletter</a></li>
<li><a href="http://youtube.com/dataschool">YouTube channel</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="playing-with-data-using-mtcars.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Data Analytics I Bookdown.pdf", "Data Analytics I Bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
